// Generated by CoffeeScript 1.7.1
var make_year, months;

window.database = {};

MONTH_NAMES = {
    1: ["Jan", "January"],
    2: ["Jan", "Febuary"],
    3: ["Jan", "March"],
    4: ["Jan", "April"],
    5: ["Jan", "May"],
    6: ["Jan", "June"],
    7: ["Jan", "July"],
    8: ["Jan", "August"],
    9: ["Jan", "September"],
    10: ["Jan", "October"],
    11: ["Jan", "November"],
    12: ["Jan", "December"]
};

make_year = function(year, months) {
    var after, before, e, elm, m, timeline, yr, yrid, children, _results;
    year = parseInt(year);
    timeline = $("#timeline");
    before = elm = after = 0;
    yrid = "y" + year;
    children = timeline.children("[id^='y']");
    for (var i = 0; i < children.length; i++) {
        e = children[i];
        if (!e.id) {
            continue;
        }
        if (e.id === yrid) {
            elm = $(e);
            break;
        } else {
            yr = parseInt(e.id.slice(1));
            if (year < yr) {
                before = e;
                break;
            } else if (year > yr) {
                after = e;
            }
        }
    }
    if (!elm) {
        elm = $("<div></div>");
        elm.attr("id", "y" + year);
        if (before) {
            $(before).before(elm);
        } else {
            $(after).after(elm);
        }
    }
    elm.empty();
    _results = [];
    for (m = 1; m <= 12; m++) {
        e = $("<div></div>");
        elm.append($("<div class='month-heading'>" + MONTH_NAMES[m][1] + " " + year + "</div>"));
        e.attr("id", "y" + year + "m" + m);
        elm.append(e);
    }
};

$(function() {
    $.extend(Trove.defaults, {
        q: town,
        include: "articletext,links,years",
        zone: "picture,newspaper,map,article"
    });
    for (var yr = 1900; yr <= 2000; yr++) {
        make_year(yr);
    }
});

